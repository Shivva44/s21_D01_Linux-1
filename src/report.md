# Отчёт по проекту «Операционные системы UNIX/Linux (Базовый)».

## Содержание


1. *[Установка ОС](#part-1)*
2. *[Создание пользователя](#part-2)*
3. *[Настройка сети ОС](#part-3)*
4. *[Обновление ОС](#part-4)*
5. *[Использование команды  sudo](#part-5)*
6. *[Установка и настройка службы времени](#part-6)*
7. *[Установка и использование текстовых редакторов](#part-7)*
8. *[Установка и базовая настройка сервиса SSHD](#part-8)*
9. *[Установка и использование утилит top, htop](#part-9)*
10. *[Использование утилиты fdisk](#part-10)*
11. *[Использование утилиты df](#part-11)*
12. *[Использование утилиты du](#part-12)*
13. *[Установка и использование утилиты ncdu](#part-13)*
14. *[Работа с системными журналами](#part-14)*
15. *[Использование планировщика заданий CRON](#part-15)*







## Part 1.

- ##### Проверка версии `Ubuntu`:

<img  src="photo/Part1/part1.install.png"  width="30%"/>


## Part 2.

- ##### Cоздание пользователя `yormwela` и добавление в группу `adm`: 

<img src="photo/Part2/part2.adduser.png"  width="50%"/>


- ##### Вывод команды `/etc/passwd`:

<img src="photo/Part2/part2.etc:passwd.png" alt="drawing" width="50%"/>


## Part 3.
1. ##### Задал название машины вида `yormwela-1` исользуя команду `hostnamectl set-hostname yormwela-1`

2. ##### Установил временную зону исользуя команду `timedatectl set-timezone Europe/Moscow`:
    

3. ##### Вывод сетевых интерфейсов с помощью кольнсольной программы `ifconfig`:
- lo(loopback) - Локальная петля.Служит для подлкючения по сети к этому же компьютеру и не требует дополнительной настройки.

<img src="photo/Part3/part3.ifconfig.png" alt="drawing" width="50%"/>


4. ##### Используя консольную команду `hostname -I` получил ip адрес устройства, на котором работаю, от DHCP сервера:
- DHCP(Dynamic Host Configuration Protocol) -  сетевой протокол, позволяющий сетевым устройствам автоматически получать IP-адрес и другие параметры, необходимые для работы в сети `TCP/IP`. Где `TCP/IP` - сетевая модель передачи данных, представленных в цифровом виде.

<img src="photo/Part3/part3.hostname.png" alt="drawing" width="50%"/>


5. ##### Определил и вывел на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw).

<img src="photo/Part3/part3.ipshow.png" alt="drawing" width="50%"/>

6. ##### Задал статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (используя публичные DNS серверы, например 1.1.1.1 или 8.8.8.8).
- так же для сохранения настроек использовал команду `sudo netplan apply`

<img src="photo/Part3/part3.netplan.png" alt="drawing" width="50%"/>


7. ##### Перезагрузил  виртуальную машинуб исвользуя команду `reboot`. Убедился, что статичные сетевые настройки (ip, gw, dns) соответствуют заданным в предыдущем пункте  и пропинговал хосты.
- Успешно пропинговал удалённые хосты `1.1.1.1` и `ya.ru`. В выводе команды присутствуют фразы `0% packet loss`. 

<img src="photo/Part3/part3.pinghost.png" alt="drawing" width="50%"/>


## Part 4.

1. ##### Обновил системные пакеты до последней на момент выполнения задания версии.
- для обновления системных пакетов изначально выполняю команду `sudo apt update`,  которая выполняет обновление репозиториев `ubuntu`.
- затем для установки выполняю команду `sudo apt upgrade` 
- после установки выводим команду из первого пункта для подтверждения обновления

<img src="photo/Part4/part4.update.png" alt="drawing" width="50%"/>


## Part 5.
1. ##### Использование команды sudo
- предоставил пользователю созданному в Part 2. , права суперпользователя , используя команду `sudo usermod -aG sudo yormwela`.
- команда sudo ( substitute user and do, подменить пользователя и выполнить ) позволяет строго определенным пользователям выполнять указанные программы с административными привилегиями без ввода пароля суперпользователя root.
- изменил hostname 

<img src="photo/Part5/psrt5.sudo.png" alt="drawing" width="50%"/>


## Part 6.
1. ##### Настроил службу автоматической синхронизации времени.
- использовал команду `timedatectl show`:

<img src="photo/Part6/part6.timedate.png" alt="drawing" width="50%"/>


## Part 7.
1. ##### Установил текстовые редакторы.
- остальные по аналогии

<img src="photo/Part7/part7.installtxt.png" alt="drawing" width="50%"/>


2. ##### Cоздание файла test_X.txt, где X -- название редактора, в котором создан файл.
- ##### VIM:
- В Vim нужно нажать `i` для начала ввода, ввести текст, затем нажать `Esc` для выхода из режима ввода, далее `:wq` и имя файла для сохранения:

<img src="photo/Part7/part7.exitVIM.png" alt="drawing" width="70%"/>


- ##### NANO
- В Nano нужно ввести текст, нажать `Ctrl+X` для выхода из режима ввода, `Y` для сохранения и далее имя файла и `Enter` для выхода:

<img src="photo/Part7/part7.exitNANO.png" alt="drawing" width="70%"/>
   
- ##### JOE
- В Joe нужно ввести текст, нажать `Ctrl+K` + `X` для выхода из режима ввода, ввести имя файла и `Enter` для выхода:

<img src="photo/Part7/part7.exitJOE.png" alt="drawing" width="70%"/>


3. ##### Отредактировал файлы, заменив никнейм на строку «21 School 21», закрыл файл без сохранения изменений.
- ##### VIM 
- Для выхода из Vim без сохранения нужно нажать `Esc` далее ввести `:q!`:

<img src="photo/Part7/part7.changeVIM.png" alt="drawing" width="60%"/>

- ##### NANO
- Для выхода из Nano без сохранения нужно нажать `Ctrl+X` и далее `N`:

<img src="photo/Part7/part7.changeNANO.png" alt="drawing" width="60%"/>
   
- ##### JOE
- Для выхода из Joe без сохранения нужно нажать `Ctrl+С` и далее `Y`:

<img src="photo/Part7/part7.changeJOE.png" alt="drawing" width="60%"/>


4. ##### Отредактировал файл ещё раз (по аналогии с предыдущим пунктом), а затем освоил функции поиска по содержимому файла (слово) и замены слова на любое другое.
- ##### VIM 

- Для поиска в Vim нажать `Esc` и далее `/`:

<img src="photo/Part7/part7.searchVIM.png" alt="drawing" width="60%"/>



- Для замены в Vim `:s/old/new`:

<img src="photo/Part7/part7.changewordVIM.png" alt="drawing" width="60%"/>


- ##### NANO

- Для поиска в Nano нажать `Ctrl+W`:

<img src="photo/Part7/part7.searchNANO.png" alt="drawing" width="60%"/>



- Для замены в Nano нажать `Ctrl+\`, написать то, что нужно заменить, затем `Enter`, далее то, чем заменить, в конце нажать `Y` для сохранения:

<img src="photo/Part7/part7.changewordNANO.png" alt="drawing" width="60%"/>
   
- ##### JOE

- Для поиска в Joe нажать `Ctrl+K` далее `F` , потом то, что ищем, затем ввести `I`:

<img src="photo/Part7/part7.searchJOE.png" alt="drawing" width="60%"/>



- Для замены в Joe нажать `Ctrl+K`, далее `F`, потом что менять, ввести `R`, затем на что менять, в конце `Y` для сохранения:

<img src="photo/Part7/part7.changewordJOE.png" alt="drawing" width="60%"/>


## Part 8.

1. ##### Установка службы SSHd.
<img src="photo/Part8/part8.installSShd.png" alt="drawing" width="60%"/>


2. ##### Добавление автостарта службы при загрузке системы.
    - Автостарт добавляется автоматически,  в ином случае можно использовать команду `sudo systemctl enable sshd`

3. ##### Перенастроил службу SSHd на порт 2022.
    - для перенастройки открыл через текстовый редактор файл `sudo nano /etc/ssh/sshd_config` и поменял `port 22` на нужное значение

<img src="photo/Part8/part8.changeport.png" alt="drawing" width="60%"/>

4. ##### Используя команду `ps`, показываю наличие процесса `sshd`. Для этого к команде добавлены ключи `-e` и `-f`.

    - Команда `ps` используется для отображения текущих процессов в системе, а ключ `-ef` используется для определения формата вывода и фильтрации результатов.
    `-e` — отображает все процессы в системе, включая процессы, запущенные от имени всех пользователей.
    `-f` — отображает полную информацию о каждом процессе, включая `PID`, родительский `PID`, пользовательский и системный CPU, использование памяти и другие свойства процесса.
    `grep sshd` — `grep` используется для фильтрации строк вывода команды `ps -ef` и отображения только строк, содержащих "sshd". Это позволяет нам найти процессы, связанные со службой `SSHd`.

<img src="photo/Part8/part8.commandps.png" alt="drawing" width="60%"/>

5. ##### Перезагрузка системы.
    - Для перезагрузки использовал команду `sudo reboot`.

6. ##### Вывод команды netstat.
    - Вывод содержит `tcp 0 0 0.0.0.0:2022 0.0.0.0:* LISTEN`

<img src="photo/Part8/part8.netstat.png" alt="drawing" width="60%"/>


- Значение ключей в команде `netstat -tan`:

    - `-t` — отображает только TCP-соединения.
    - `-a` — отображает все соединения и порты, включая слушающие порты.
    - `-n` — отображает порты в числовом формате, без разрешения имён.

- Значение каждого столбца в выводе команды `netstat -tan`:

    - `Proto` — Содержит тип протокола
        - `tcp` — протокол, используемый для соединения.
    - `Recv-Q` — Счётчик байтов не скопированных программой пользователя из этого сокета.
    - `Send-Q` — Счётчик байтов, не подтверждённых удалённым узлом.
    - `Local Address` — Адрес и номер порта локального конца сокета.
        - `0.0.0.0:2022` — локальный IP-адрес и порт, на котором служба `SSHd` слушает входящие соединения.
    - `Foreign Address` — Адрес и номер порта удалённого конца сокета.
        - `0.0.0.0:*` — удалённый IP-адрес и порт.
    - `State` — Состояние сокета.
        - `LISTEN` — Сокет ожидает входящих подключений.
        - `SYN_SENT` — Сокет, находящийся в режиме активной попытки установки подключения.


## Part 9.

1. ##### Запустил утилиту top.
<img src="photo/Part9/part9.top.png" alt="drawing" width="60%"/>

- Отчет по выводу команды `top`:
    - uptime - 36 min.
    - количество авторизованных пользователей - 1.
    - общую загрузку системы (3 величины за последние 1,5,15 минут) - 0.00, 0.00, 0.00. 
    - общее количество процессов - 113
    - загрузку cpu `%Cpu(s): 0.0 us, 0.2 sy, 0.0 ni, 99.8 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st`
    - загрузку памяти `MiB Mem: 3919.3 total, 3445.4 free, 162.7 used, 311.2 buff/cache`
    - pid процесса занимающего больше всего памяти - 706
    - pid процесса, занимающего больше всего процессорного времени - 1173
    

- Отчет по выводу команды `htop`
    - Отсортированный по `PID`

<img src="photo/Part9/part9.htopPID.png" alt="drawing" width="60%"/>

   - Отсортированный по `PERCENT_CPU` 

<img src="photo/Part9/part9.htopCPU.png" alt="drawing" width="60%"/>

   - Отсортированный по `PERCENT_MEM` 

<img src="photo/Part9/part9.htopMEM.png" alt="drawing" width="60%"/>

   - Отсортированный по `TIME`

<img src="photo/Part9/part9.htopTIME.png" alt="drawing" width="60%"/>

   - Отфильтрованный для процесса sshd

<img src="photo/Part9/part9.htopSSH.png" alt="drawing" width="60%"/>

   - C процессом syslog, найденным, используя поиск

<img src="photo/Part9/part9.htopSYSLOG.png" alt="drawing" width="60%"/>

   - C добавленным выводом hostname, clock и uptime

<img src="photo/Part9/part9.htopdisplaymod.png" alt="drawing" width="60%"/>


## Part 10.

1. ##### Запустил команду fdisk -l.

<img src="photo/Part10/part10.fdisk.png" alt="drawing" width="60%"/>

- ##### Отчёт:
  - Название жёсткого диска: **/dev/vda**.
  - Размер: **50.0 G**.
  - Количество секторов: **104857600**.
  - Размер `swap`: **3.8 G**.(для определения `swap`, потребовалось использовать команду `free -h` )


## Part 11.


##### Запуск команды `df`: 

<img src="photo/Part11/part11.df.png" alt="drawing" width="60%"/>

- Отчёт для корневого раздела:
  - размер раздела: `24050032`.
  - размер занятого пространства: `7264952`.
  - размер свободного пространства: `15538056`.
  - процент использования: `32%`.
- Единица измерения в выводе:  `bytes`.

##### Запуск команды `df -Th`:

<img src="photo/Part11/part11.dfTH.png" alt="drawing" width="60%"/>

- Отчёт для корневого раздела:
  - размер раздела: `23G`.
  - размер занятого пространства: `7.0G`.
  - размер свободного пространства: `15G`.
  - процент использования: `32%`.
- Тип файловой системы для раздела: `ext4`.


## Part 12.



##### Запуск команды `du`, вывод размера папок `/home`, `/var`, `/var/log` (в байтах, в человекочитаемом виде):

<img src="photo/Part12/part12.duSH.png" alt="drawing" width="60%"/>

##### Вывод размера всего содержимого в `/var/log` (не общее, а каждого вложенного элемента, используя *):

<img src="photo/Part12/part12.duHD.png" alt="drawing" width="60%"/>



## Part 13.


##### Установка утилиты `ncdu`:

<img src="photo/Part13/part13.installNCDU.png" alt="drawing" width="60%"/>

##### Вывод размера папок `/home`:

<img src="photo/Part13/part13.homeNCDU.png" alt="drawing" width="60%"/>

##### Вывод размера папок `/var`:


<img src="photo/Part13/part13.varNCDU.png" alt="drawing" width="60%"/>

##### Вывод размера папок `/var/log`:


<img src="photo/Part13/part13.var:logNCDU.png" alt="drawing" width="60%"/>



## Part 14.


- Время последней успешной авторизации, имя пользователя и метод входа в систему:

`Jan 30 13:12:23`,  имя пользователя `yourmwela`, ввод пароля через консоль.

- Перезапустил службу `SSHd` с помощью команды `reboot`

- Скриншот с сообщением о рестарте службы (искать в логах):

`Jan 30 15:28:00`


<img src="photo/Part14/part14.logssh.png" alt="drawing" width="60%"/>



## Part 15.


##### Открытие планировщика заданий через команду `crontab -e` и добавление строчки `*/2 * * * * uptime` :

<img src="photo/Part15/part15.openCRON.png" alt="drawing" width="60%"/>

##### Используя планировщик заданий, запускаю команду `uptime` через каждые 2 минуты.
- Строчки в системных журналах (минимум две в заданном временном диапазоне) о выполнении:

<img src="photo/Part15/part15.logCRON.png" alt="drawing" width="60%"/>

- Список текущих заданий для `CRON`:

<img src="photo/Part15/part15.lookCRON.png" alt="drawing" width="60%"/>


##### Удаление всех задания из планировщика заданий.

- Скриншот со списком текущих заданий для `CRON`:

<img src="photo/Part15/part15.deletedCRON.png" alt="drawing" width="60%"/>





